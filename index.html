<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Islamic Audio Player - Qur'an Recitation, Islamic Lectures</title>
    <meta name="description" content="World's best Islamic audio player featuring Qur'an recitations, Islamic lectures in English and Urdu, and Qur'an translations.">
    <meta name="keywords" content="Islamic audio, Qur'an recitation, Islamic lectures, English, Urdu, Qur'an translation, audio player">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #1db954;
            --secondary-color: #1ed760;
            --bg-color: #121212;
            --card-bg: #1e1e1e;
            --text-color: #ffffff;
            --secondary-text: #b3b3b3;
            --shadow: 0 4px 12px rgba(0,0,0,0.3);
            --border: 1px solid rgba(255,255,255,0.1);
            --progress-bg: #333;
            --progress-fill: var(--primary-color);
            --hover-bg: rgba(255,255,255,0.1);
            --modal-bg: rgba(0,0,0,0.85);
            --selection-color: #2ecc71;
        }

        body.light-mode {
            --bg-color: #f5f7fa;
            --card-bg: #ffffff;
            --text-color: #2d3748;
            --secondary-text: #718096;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
            --border: 1px solid rgba(0,0,0,0.05);
            --progress-bg: #e2e8f0;
            --hover-bg: rgba(0,0,0,0.03);
            --modal-bg: rgba(255,255,255,0.95);
            --selection-color: #27ae60;
        }

        /* Text selection styling */
        ::selection {
            background: var(--selection-color);
            color: white;
        }
        ::-moz-selection {
            background: var(--selection-color);
            color: white;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* Animation for dust particles */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: float 10s infinite linear;
            opacity: 0.4;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh);
                opacity: 0.4;
            }
            100% {
                transform: translateY(-10vh);
                opacity: 0.1;
            }
        }

        /* Logo shine animation */
        @keyframes logoShine {
            0% { 
                text-shadow: 0 0 0px rgba(29, 185, 84, 0.5); 
            }
            50% { 
                text-shadow: 0 0 15px rgba(29, 185, 84, 0.8); 
            }
            100% { 
                text-shadow: 0 0 0px rgba(29, 185, 84, 0.5); 
            }
        }

        .logo.shine {
            animation: logoShine 2s ease-in-out;
        }

        /* Header and Navigation */
        header {
            background-color: var(--card-bg);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            color: var(--primary-color);
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
            position: relative;
        }

        /* Modern Menu Modal */
        .menu-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--modal-bg);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
        }

        .menu-modal.active {
            display: block;
        }

        .modal-content {
            background: var(--card-bg);
            max-width: 1000px;
            margin: 40px auto;
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.8rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }

        .close-modal:hover {
            background: var(--hover-bg);
            color: var(--primary-color);
        }

        .modal-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
        }

        .modal-grid a {
            display: block;
            padding: 12px 15px;
            color: var(--text-color);
            text-decoration: none;
            font-size: 1rem;
            border-radius: 8px;
            transition: background-color 0.2s, color 0.2s;
            background: rgba(0,0,0,0.05);
        }

        .modal-grid a:hover,
        .modal-grid a:focus {
            background-color: var(--hover-bg);
            color: var(--primary-color);
        }

        /* Search Popup */
        .search-container {
            position: relative;
        }

        .search-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 10px;
            transition: all 0.3s;
        }

        .search-btn:hover,
        .search-btn:focus {
            color: var(--primary-color);
        }

        .search-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--card-bg);
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            z-index: 1000;
            width: 90%;
            max-width: 500px;
        }

        .search-popup.active {
            display: block;
        }

        .search-input {
            width: 100%;
            padding: 10px;
            border: var(--border);
            border-radius: 5px;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-size: 1rem;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }

        .search-result-item {
            padding: 10px;
            border-bottom: var(--border);
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .search-result-item:hover,
        .search-result-item:focus {
            background-color: var(--hover-bg);
        }

        /* Theme toggle */
        .theme-toggle {
            background: var(--card-bg);
            border: var(--border);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover,
        .theme-toggle:focus {
            background: var(--hover-bg);
            transform: scale(1.05);
        }

        .theme-toggle i {
            font-size: 1.2rem;
            color: var(--text-color);
        }

        /* Back to Top */
        .back-to-top {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            z-index: 99;
        }

        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .back-to-top:hover,
        .back-to-top:focus {
            transform: scale(1.1);
        }

        /* Main content layout */
        .main-container {
            display: flex;
            flex: 1;
            padding: 20px;
            gap: 20px;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
        }

        /* Playlist section with scroll behavior */
        .playlist-section {
            flex: 1;
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
            max-width: 400px;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 20px);
            overflow: hidden;
        }

        .playlist-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .playlist-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        #playlist {
            list-style: none;
            overflow-y: auto;
            flex: 1;
            border-radius: 10px;
            background-color: var(--bg-color);
            scroll-behavior: smooth;
            padding: 5px;
        }

        @media (max-width: 768px) {
            .playlist-section {
                max-width: 100%;
                height: auto;
                max-height: 100vh;
            }
        }

        .section-title {
            font-size: 1.5rem;
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--primary-color);
        }

        .share-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .share-btn:hover,
        .share-btn:focus {
            color: var(--primary-color);
        }

        #playlist li {
            padding: 12px 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: var(--border);
            transition: background-color 0.2s;
        }

        #playlist li:hover,
        #playlist li:focus {
            background-color: var(--hover-bg);
        }

        #playlist li.playing {
            background: linear-gradient(to right, rgba(29, 185, 84, 0.15), transparent);
            color: var(--primary-color);
            font-weight: 500;
        }

        .track-info {
            flex: 1;
            min-width: 0;
        }

        .track-title {
            font-weight: 500;
            font-size: 1.05rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .track-artist {
            font-size: 0.85rem;
            color: var(--secondary-text);
            margin-top: 3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .track-duration {
            font-size: 0.9rem;
            color: var(--secondary-text);
            margin-left: 10px;
            min-width: 60px;
            text-align: right;
        }

        .download-icon {
            color: var(--primary-color);
            font-size: 1.1rem;
            margin-left: 15px;
            opacity: 0.7;
            transition: opacity 0.2s;
        }

        .download-icon:hover,
        .download-icon:focus {
            opacity: 1;
        }

        /* Player section */
        .player-section {
            flex: 2;
            background-color: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .current-track {
            text-align: center;
            margin-bottom: 20px;
        }

        .album-art {
            width: 220px;
            height: 220px;
            margin: 0 auto 25px;
            border-radius: 10px;
            background: linear-gradient(135deg, #1db954, #0d8a3f);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow);
        }

        .album-art i {
            font-size: 5rem;
            color: rgba(255,255,255,0.9);
        }

        .track-details {
            margin-bottom: 25px;
        }

        .now-playing-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .now-playing-artist {
            font-size: 1.2rem;
            color: var(--secondary-text);
        }

        /* Progress controls */
        .progress-container {
            margin-bottom: 30px;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 0.9rem;
            color: var(--secondary-text);
        }

        .progress-bar {
            height: 6px;
            background-color: var(--progress-bg);
            border-radius: 3px;
            position: relative;
            cursor: pointer;
        }

        .progress-fill {
            height: 100%;
            width: 0;
            background-color: var(--progress-fill);
            border-radius: 3px;
            position: relative;
        }

        .progress-handle {
            position: absolute;
            right: -8px;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            background-color: var(--primary-color);
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0,0,0,0.5);
            opacity: 0;
            transition: opacity 0.2s;
        }

        .progress-bar:hover .progress-handle {
            opacity: 1;
        }

        /* Control buttons - ensure they remain round */
        .control-buttons {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .control-btn {
            background: none;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s;
            color: var(--text-color);
            position: relative;
        }

        .control-btn::after {
            content: attr(title);
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s;
        }

        .control-btn:hover::after,
        .control-btn:focus::after {
            opacity: 1;
        }

        .control-btn:hover,
        .control-btn:focus {
            background-color: var(--hover-bg);
        }

        .control-btn.main {
            width: 60px;
            height: 60px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
        }

        .control-btn.main:hover,
        .control-btn.main:focus {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(29, 185, 84, 0.4);
        }

        .control-btn.active {
            color: var(--primary-color);
        }

        .control-btn i {
            font-size: 1.2rem;
        }

        .control-btn.main i {
            font-size: 1.5rem;
        }

        /* Volume control */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 15px;
            max-width: 250px;
            margin: 0 auto;
            position: relative;
        }

        .volume-icon {
            color: var(--text-color);
            font-size: 1.2rem;
            cursor: pointer;
            transition: color 0.2s;
        }

        .volume-icon:hover,
        .volume-icon:focus {
            color: var(--primary-color);
        }

        .volume-slider {
            flex: 1;
            height: 5px;
            background-color: var(--progress-bg);
            border-radius: 3px;
            position: relative;
            cursor: pointer;
            display: none;
        }

        .volume-slider.active {
            display: block;
        }

        .volume-level {
            height: 100%;
            width: 100%;
            background-color: var(--progress-fill);
            border-radius: 3px;
        }

        /* Footer */
        footer {
            background-color: var(--card-bg);
            padding: 20px;
            text-align: center;
            color: var(--secondary-text);
            font-size: 0.9rem;
            margin-top: auto;
            border-top: var(--border);
        }

        /* Responsive adjustments */
        @media (max-width: 480px) {
            .album-art {
                width: 180px;
                height: 180px;
            }
            
            .now-playing-title {
                font-size: 1.5rem;
            }
            
            .control-buttons {
                gap: 10px;
            }
            
            .control-btn {
                width: 45px;
                height: 45px;
            }
            
            .control-btn.main {
                width: 55px;
                height: 55px;
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <header>
        <div class="logo" id="logo">
            <i class="fas fa-mosque"></i>
            <span>Islamic Audio Player</span>
        </div>
        <div class="nav-buttons">
            <div class="theme-toggle" id="theme-toggle" title="Toggle Theme">
                <i class="fas fa-moon"></i>
            </div>
            <div class="search-container">
                <button class="search-btn" title="Search" aria-label="Open search">
                    <i class="fas fa-search"></i>
                </button>
                <div class="search-popup" id="search-popup">
                    <input type="text" class="search-input" id="search-input" placeholder="Search tracks..." aria-label="Search tracks">
                    <div class="search-results" id="search-results"></div>
                </div>
            </div>
            <button class="mega-menu-btn" id="menu-btn" aria-expanded="false" aria-controls="menu-modal">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </header>

    <!-- Modern Menu Modal -->
    <div class="menu-modal" id="menu-modal">
        <div class="modal-content">
            <button class="close-modal" id="close-modal" aria-label="Close menu">
                <i class="fas fa-times"></i>
            </button>
            <h2 class="section-title" style="margin-bottom: 20px;">
                <i class="fas fa-bars"></i> Islamic Content Menu
            </h2>
            <div class="modal-grid">
                <a href="#quran-al-fatiha">Surah Al-Fatiha</a>
                <a href="#quran-al-baqarah">Surah Al-Baqarah</a>
                <a href="#quran-yasin">Surah Yasin</a>
                <a href="#quran-ar-rahman">Surah Ar-Rahman</a>
                <a href="#quran-al-mulk">Surah Al-Mulk</a>
                <a href="#lecture-purpose">Purpose of Life</a>
                <a href="#lecture-patience">Patience in Islam</a>
                <a href="#tafsir-al-kahf">Tafsir Surah Al-Kahf</a>
                <a href="#quran-al-ikhlas">Surah Al-Ikhlas</a>
                <a href="#quran-an-nas">Surah An-Nas</a>
                <a href="#lecture-taqwa">Taqwa in Islam</a>
                <a href="#lecture-charity">Charity in Islam</a>
                <a href="#quran-translation-en">Qur'an Translation (English)</a>
                <a href="#quran-translation-ur">Qur'an Translation (Urdu)</a>
                <a href="#lecture-ramadan">Ramadan Guidance</a>
                <a href="#lecture-prayer">Importance of Salah</a>
                <a href="#quran-al-kawthar">Surah Al-Kawthar</a>
                <a href="#about-us">About Us</a>
                <a href="#contact-us">Contact Us</a>
                <a href="#donate">Donate</a>
            </div>
        </div>
    </div>

    <div class="main-container">
        <div class="playlist-section">
            <div class="playlist-container">
                <div class="playlist-header">
                    <h2 class="section-title">
                        <i class="fas fa-list-music"></i> Qur'an & Lectures
                        <button class="share-btn" title="Share" aria-label="Share playlist">
                            <i class="fas fa-share-alt"></i>
                        </button>
                    </h2>
                </div>
                <ul id="playlist"></ul>
            </div>
        </div>

        <div class="player-section">
            <div class="current-track">
                <div class="album-art">
                    <i class="fas fa-mosque"></i>
                </div>
                <div class="track-details">
                    <h2 id="now-playing-title" class="now-playing-title">Select a Track</h2>
                    <div id="now-playing-artist" class="now-playing-artist">From the playlist</div>
                </div>
            </div>

            <div class="progress-container">
                <div class="time-display">
                    <span id="current-time">0:00</span>
                    <span id="duration">0:00</span>
                </div>
                <div class="progress-bar" id="progress-bar">
                    <div class="progress-fill" id="progress-fill">
                        <div class="progress-handle"></div>
                    </div>
                </div>
            </div>

            <div class="control-buttons">
                <button class="control-btn" id="shuffle" title="Shuffle" aria-label="Toggle shuffle">
                    <i class="fas fa-random"></i>
                </button>
                <button class="control-btn" id="previous" title="Previous" aria-label="Previous track">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="control-btn main" id="play-pause" title="Play" aria-label="Play or pause track">
                    <i class="fas fa-play"></i>
                </button>
                <button class="control-btn" id="next" title="Next" aria-label="Next track">
                    <i class="fas fa-step-forward"></i>
                </button>
                <button class="control-btn" id="repeat" title="Repeat" aria-label="Toggle repeat">
                    <i class="fas fa-redo"></i>
                </button>
            </div>

            <div class="volume-control">
                <i class="fas fa-volume-up volume-icon" id="volume-icon" aria-label="Adjust volume"></i>
                <div class="volume-slider" id="volume-slider">
                    <div class="volume-level" id="volume-level"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="back-to-top" id="back-to-top" aria-label="Back to top">
        <i class="fas fa-arrow-up"></i>
    </div>

    <footer>
        <p>© 2023 Islamic Audio Player | Experience the Beauty of Qur'an Recitation and Islamic Knowledge</p>
    </footer>

    <audio id="audio"></audio>

    <script>
        // Islamic audio content
        const islamicContent = [
            { 
                title: "Most Beautiful Quran", 
                artist: "Many Qaris Worldwide", 
                file: "https://archive.org/download/Most-Beautiful-Quran-Recitation-Playlist-Audio-Quran-Mp3/01%20-Most%20Beautiful%20Quran%20-%20Arabic%20Only.mp3",
                duration: "1:23:45"
            },
            { 
                title: "Three Hours+ Mp3 Quran", 
                artist: "Omar Hisham Al Arabi", 
                file: "https://archive.org/download/quran-recitations-most-beautiful-200/Beautiful%20Quran%20Recitation%20-%20urdu%20islamic%20downloads%20dot%20wordpress%20dot%20com%20%285%29.mp3",
                duration: "3:05:22"
            },
            { 
                title: "Warning for wrongdoers", 
                artist: "Abdur Rahman Mossad", 
                file: "https://archive.org/download/quran-recitations-most-beautiful-200/Beautiful%20Quran%20Recitation%20-%20urdu%20islamic%20downloads%20dot%20wordpress%20dot%20com%20%284%29.mp3",
                duration: "0:45:18"
            },
            { 
                title: "Soft Quran Recitations", 
                artist: "Abdur Rahman Mossad", 
                file: "https://archive.org/download/quran-recitations-most-beautiful-200/Beautiful%20Quran%20Recitation%20-%20urdu%20islamic%20downloads%20dot%20wordpress%20dot%20com%20%283%29.mp3",
                duration: "1:15:07"
            },
            { 
                title: "Beautiful Quran Recitations", 
                artist: "Abdur Rahman Mossad", 
                file: "https://archive.org/download/quran-recitations-most-beautiful-200/Beautiful%20Quran%20Recitation%20-%20urdu%20islamic%20downloads%20dot%20wordpress%20dot%20com%20%282%29.mp3",
                duration: "0:52:33"
            },
            { 
                title: "Heart Touching Audio Quran", 
                artist: "Hamza Boudib", 
                file: "https://archive.org/download/hamza-boudib-beautiful-quran-recitation/Hamza%20Boudib%20Beautiful%20Quran%20Recitation.mp3",
                duration: "2:18:45"
            },
            { 
                title: "Long Quran Recitations", 
                artist: "Omar Hisham Al Arabi", 
                file: "https://ia600700.us.archive.org/20/items/Most-Beautiful-Quran-Recitation-Playlist-Audio-Quran-Mp3/3%20-%20Omar%20Hisham%20Al%20Arabi%20-%20Mix.mp3",
                duration: "1:43:22"
            },
            { 
                title: "HQ Quran Recitations", 
                artist: "Ameer Shamim", 
                file: "https://ia600700.us.archive.org/20/items/Most-Beautiful-Quran-Recitation-Playlist-Audio-Quran-Mp3/1%20-%20Ameer%20Shamim%20Quran%20Recitation.mp3",
                duration: "0:38:15"
            },
             { 
                title: "Surah Yaseen", 
                artist: "Qari Tareq Mohammed", 
                file: "https://ia800700.us.archive.org/20/items/Most-Beautiful-Quran-Recitation-Playlist-Audio-Quran-Mp3/02-Surah%20Yaseen%20-%20Qari%20Tareq%20Mohammed.mp3",
                duration: "0:22:45"
            },
             { 
                title: "Surah Ale - Imran", 
                artist: "Naif Al Faisal", 
                file: "https://ia800700.us.archive.org/20/items/Most-Beautiful-Quran-Recitation-Playlist-Audio-Quran-Mp3/01-Surah%20Ali%20-%20Imran%20%28110-112%29%20By%20%20Naif%20Al%20Faisal%20%E1%B4%B4%E1%B4%B0.mp3",
                duration: "0:18:30"
            },
             { 
                title: "Quran Recitations", 
                artist: "by Tariq Mohammed طارق محمد", 
                file: "All Quran Recitations by Tariq Mohammed طارق محمد.mp3",
                duration: "4:15:22"
            }
        ];

        // DOM Elements
        const audio = document.getElementById('audio');
        const playlist = document.getElementById('playlist');
        const playPauseBtn = document.getElementById('play-pause');
        const nextBtn = document.getElementById('next');
        const previousBtn = document.getElementById('previous');
        const shuffleBtn = document.getElementById('shuffle');
        const repeatBtn = document.getElementById('repeat');
        const themeToggle = document.getElementById('theme-toggle');
        const nowPlayingTitle = document.getElementById('now-playing-title');
        const nowPlayingArtist = document.getElementById('now-playing-artist');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const progressBar = document.getElementById('progress-bar');
        const progressFill = document.getElementById('progress-fill');
        const volumeSlider = document.getElementById('volume-slider');
        const volumeLevel = document.getElementById('volume-level');
        const volumeIcon = document.getElementById('volume-icon');
        const searchBtn = document.querySelector('.search-btn');
        const searchPopup = document.getElementById('search-popup');
        const searchInput = document.getElementById('search-input');
        const searchResults = document.getElementById('search-results');
        const shareBtn = document.querySelector('.share-btn');
        const backToTop = document.getElementById('back-to-top');
        const menuBtn = document.getElementById('menu-btn');
        const menuModal = document.getElementById('menu-modal');
        const closeModal = document.getElementById('close-modal');
        const logo = document.getElementById('logo');

        // Player state
        let currentTrackIndex = 0;
        let isPlaying = false;
        let isShuffle = false;
        let isRepeat = false;
        let volume = 1.0; // Start at full volume
        let volumeStates = [1.0, 0.5, 0.0]; // Full, half, mute
        let currentVolumeState = 0; // Index for volumeStates

        // Initialize player
        async function initPlayer() {
            // Populate playlist with dynamic duration
            for (let i = 0; i < islamicContent.length; i++) {
                const li = document.createElement('li');
                li.innerHTML = `
                    <div class="track-info">
                        <div class="track-title">${islamicContent[i].title}</div>
                        <div class="track-artist">${islamicContent[i].artist}</div>
                    </div>
                    <div class="track-duration">${islamicContent[i].duration}</div>
                    <a href="${islamicContent[i].file}" download="${islamicContent[i].title}" class="download-icon">
                        <i class="fas fa-download"></i>
                    </a>
                `;
                li.setAttribute('data-index', i);
                li.setAttribute('tabindex', '0');
                li.addEventListener('click', () => playTrack(i));
                li.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') playTrack(i);
                });
                playlist.appendChild(li);
            }

            // Set initial volume
            audio.volume = volume;
            volumeLevel.style.width = `${volume * 100}%`;
            updateVolumeIcon();

            // Load theme preference
            loadThemePreference();

            // Initialize particles
            initParticles();

            // Show back to top button on scroll
            window.addEventListener('scroll', () => {
                backToTop.classList.toggle('visible', window.scrollY > 300);
            });
            
            // Add logo shine effect on page load
            logo.classList.add('shine');
            setTimeout(() => logo.classList.remove('shine'), 2000);
        }

        // Play a track
        function playTrack(index) {
            if (index < 0 || index >= islamicContent.length) return;
            
            currentTrackIndex = index;
            const track = islamicContent[index];
            
            audio.src = track.file;
            audio.play().then(() => {
                isPlaying = true;
                updatePlayButton();
                updateNowPlaying(track);
                highlightCurrentTrack();
            }).catch(error => {
                console.error("Error playing audio:", error);
            });
        }

        // Update now playing display
        function updateNowPlaying(track) {
            nowPlayingTitle.textContent = track.title;
            nowPlayingArtist.textContent = track.artist;
        }

        // Highlight current track in playlist
        function highlightCurrentTrack() {
            const tracks = playlist.querySelectorAll('li');
            tracks.forEach(track => track.classList.remove('playing'));
            tracks[currentTrackIndex].classList.add('playing');
            tracks[currentTrackIndex].scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Update play/pause button
        function updatePlayButton() {
            const icon = playPauseBtn.querySelector('i');
            if (isPlaying) {
                icon.classList.remove('fa-play');
                icon.classList.add('fa-pause');
                playPauseBtn.title = "Pause";
                playPauseBtn.setAttribute('aria-label', 'Pause track');
            } else {
                icon.classList.remove('fa-pause');
                icon.classList.add('fa-play');
                playPauseBtn.title = "Play";
                playPauseBtn.setAttribute('aria-label', 'Play track');
            }
        }

        // Format time (seconds to hh:mm:ss)
        function formatTime(seconds) {
            if (isNaN(seconds)) return "0:00";
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = Math.floor(seconds % 60);
            
            if (hours > 0) {
                return `${hours}:${minutes < 10 ? '0' : ''}${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            } else {
                return `${minutes}:${secs < 10 ? '0' : ''}${secs}`;
            }
        }

        // Theme functionality
        function loadThemePreference() {
            const savedTheme = localStorage.getItem('theme');
            const themeIcon = themeToggle.querySelector('i');
            
            if (savedTheme === 'light-mode') {
                document.body.classList.add('light-mode');
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
            } else {
                document.body.classList.remove('light-mode');
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
            }
        }

        function toggleTheme() {
            const themeIcon = themeToggle.querySelector('i');
            document.body.classList.toggle('light-mode');
            
            if (document.body.classList.contains('light-mode')) {
                themeIcon.classList.remove('fa-moon');
                themeIcon.classList.add('fa-sun');
                localStorage.setItem('theme', 'light-mode');
            } else {
                themeIcon.classList.remove('fa-sun');
                themeIcon.classList.add('fa-moon');
                localStorage.setItem('theme', 'dark-mode');
            }
        }

        // Share functionality
        shareBtn.addEventListener('click', async () => {
            try {
                await navigator.share({
                    title: 'Islamic Audio Player',
                    text: 'Listen to Qur\'an recitations and Islamic lectures!',
                    url: window.location.href
                });
            } catch (error) {
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('Link copied to clipboard!');
                });
            }
        });

        // Search functionality
        searchBtn.addEventListener('click', () => {
            searchPopup.classList.toggle('active');
            if (searchPopup.classList.contains('active')) {
                searchInput.focus();
            }
        });

        searchInput.addEventListener('input', () => {
            const query = searchInput.value.toLowerCase();
            searchResults.innerHTML = '';
            if (query) {
                const results = islamicContent.filter(track => 
                    track.title.toLowerCase().includes(query) || 
                    track.artist.toLowerCase().includes(query)
                );
                results.forEach((track, index) => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'search-result-item';
                    resultItem.setAttribute('tabindex', '0');
                    resultItem.innerHTML = `
                        <div class="track-title">${track.title}</div>
                        <div class="track-artist">${track.artist}</div>
                    `;
                    resultItem.addEventListener('click', () => {
                        playTrack(islamicContent.indexOf(track));
                        searchPopup.classList.remove('active');
                        searchInput.value = '';
                        searchResults.innerHTML = '';
                    });
                    resultItem.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            playTrack(islamicContent.indexOf(track));
                            searchPopup.classList.remove('active');
                            searchInput.value = '';
                            searchResults.innerHTML = '';
                        }
                    });
                    searchResults.appendChild(resultItem);
                });
            }
        });

        // Close search popup when clicking outside
        document.addEventListener('click', (e) => {
            if (!searchPopup.contains(e.target) && !searchBtn.contains(e.target)) {
                searchPopup.classList.remove('active');
                searchInput.value = '';
                searchResults.innerHTML = '';
            }
        });

        // Volume control
        volumeIcon.addEventListener('click', () => {
            currentVolumeState = (currentVolumeState + 1) % volumeStates.length;
            volume = volumeStates[currentVolumeState];
            audio.volume = volume;
            volumeLevel.style.width = `${volume * 100}%`;
            updateVolumeIcon();
            volumeSlider.classList.add('active');
            setTimeout(() => volumeSlider.classList.remove('active'), 2000); // Hide slider after 2 seconds
        });

        volumeSlider.addEventListener('click', (e) => {
            const rect = volumeSlider.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            volume = Math.min(1, Math.max(0, percent));
            audio.volume = volume;
            volumeLevel.style.width = `${volume * 100}%`;
            updateVolumeIcon();
            // Update volume state to closest predefined state
            currentVolumeState = volume === 0 ? 2 : volume <= 0.5 ? 1 : 0;
        });

        function updateVolumeIcon() {
            volumeIcon.className = `fas fa-volume-${volume === 0 ? 'mute' : volume <= 0.5 ? 'down' : 'up'} volume-icon`;
            volumeIcon.setAttribute('aria-label', volume === 0 ? 'Unmute volume' : 'Adjust volume');
        }

        // Menu modal functionality
        menuBtn.addEventListener('click', () => {
            menuModal.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        });

        closeModal.addEventListener('click', () => {
            menuModal.classList.remove('active');
            document.body.style.overflow = ''; // Re-enable background scrolling
        });

        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === menuModal) {
                menuModal.classList.remove('active');
                document.body.style.overflow = '';
            }
        });

        // Particle animation
        function initParticles() {
            const particlesContainer = document.getElementById('particles');
            for (let i = 0; i < 200; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.animationDelay = `${Math.random() * 10}s`;
                particle.style.animationDuration = `${8 + Math.random() * 4}s`;
                particlesContainer.appendChild(particle);
            }
        }

        // Back to top
        backToTop.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

        // Event listeners
        playPauseBtn.addEventListener('click', () => {
            if (audio.src) {
                if (isPlaying) {
                    audio.pause();
                } else {
                    audio.play();
                }
                isPlaying = !isPlaying;
                updatePlayButton();
            } else if (islamicContent.length > 0) {
                playTrack(0);
            }
        });

        nextBtn.addEventListener('click', () => {
            let nextIndex;
            if (isShuffle) {
                nextIndex = Math.floor(Math.random() * islamicContent.length);
            } else {
                nextIndex = (currentTrackIndex + 1) % islamicContent.length;
            }
            playTrack(nextIndex);
        });

        previousBtn.addEventListener('click', () => {
            let prevIndex;
            if (isShuffle) {
                prevIndex = Math.floor(Math.random() * islamicContent.length);
            } else {
                prevIndex = (currentTrackIndex - 1 + islamicContent.length) % islamicContent.length;
            }
            playTrack(prevIndex);
        });

        shuffleBtn.addEventListener('click', () => {
            isShuffle = !isShuffle;
            shuffleBtn.classList.toggle('active', isShuffle);
            shuffleBtn.title = isShuffle ? "Shuffle On" : "Shuffle Off";
            shuffleBtn.setAttribute('aria-label', isShuffle ? 'Shuffle on' : 'Shuffle off');
        });

        repeatBtn.addEventListener('click', () => {
            isRepeat = !isRepeat;
            repeatBtn.classList.toggle('active', isRepeat);
            repeatBtn.title = isRepeat ? "Repeat On" : "Repeat Off";
            repeatBtn.setAttribute('aria-label', isRepeat ? 'Repeat on' : 'Repeat off');
        });

        themeToggle.addEventListener('click', toggleTheme);

        // Progress bar
        audio.addEventListener('timeupdate', () => {
            const percentage = (audio.currentTime / audio.duration) * 100 || 0;
            progressFill.style.width = `${percentage}%`;
            currentTimeEl.textContent = formatTime(audio.currentTime);
        });

        audio.addEventListener('loadedmetadata', () => {
            durationEl.textContent = formatTime(audio.duration);
        });

        audio.addEventListener('ended', () => {
            if (isRepeat) {
                audio.play();
            } else {
                nextBtn.click();
            }
        });

        progressBar.addEventListener('click', (e) => {
            const rect = progressBar.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            audio.currentTime = percent * audio.duration;
        });

        // Initialize player when page loads
        window.addEventListener('DOMContentLoaded', initPlayer);
    </script>
</body>
                        </html>
